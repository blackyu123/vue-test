{"remainingRequest":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\jessica\\Documents\\git\\vue-test\\src\\pages\\StaffPost.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\src\\pages\\StaffPost.vue","mtime":1547478338664},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1545311097356},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\babel-loader\\lib\\index.js","mtime":1545311081350},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1545311097356},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\vue-loader\\lib\\index.js","mtime":1545311099620}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DataSource from \"../data/datasource\";\n// import vue2Dropzone from 'vue2-dropzone';\n// import 'vue2-dropzone/dist/vue2Dropzone.min.css';\n// import '@websanova/vue-upload';\nimport {required, minLength} from 'vuelidate/lib/validators';\nimport isImage from \"is-image\";\nimport RichTextEditor from \"../components/RichTextEditor/RichTextEditor\";\n\nexport default {\n    name: 'staffPost',\n    components: {RichTextEditor},\n    data() {\n        return {\n            html: '',\n            files: [],\n            systemmsgError: false,\n            isModalOpen: false,\n            token: null,\n            userType: null,\n            list: [],\n            error: \"\",\n            staffPostResults: \"\",\n            results: \"\",\n            postContent: \"\",\n            tagAcademicYearID: \"\",\n            profolio: \"No\",\n            tagUserID: \"\",\n            tagClassID: \"\",\n            tagLevelID: \"\",\n            // files: [],\n            content: '',\n            selectedFile: null,\n            success: null,\n            dropzoneOptions: {\n                url: 'http://local.emsv2/controller/Upload_File.asmx/uploadFile',\n            },\n            isLoading: true,\n            saveResponse: \"\",\n            PostItemPath: \"\",\n        };\n    },\n    // components: {Step},\n    async mounted() {\n        // this.showSession()\n        // user menu\n        try {\n            let response = await DataSource.shared.getStaffPost();\n            for (let item of response.Table) {\n                const fileRes = await DataSource.shared.getPostFile(item.PostID);\n                if (fileRes.Table) {\n                    item.postFiles = fileRes.Table;\n                }\n\n                // get name\n                // const author = await DataSource.shared.getPostFile(item.PostCreatedBy);\n                // console.log(author);\n                // item.authorName = ;\n            }\n            this.list = response.Table;\n            let saveResponse = await DataSource.shared.getPostDropdown();\n            console.log(saveResponse);\n        } catch (e) {\n            console.log(e, '  errrr');\n        }\n        this.isLoading = false;\n        // if (response) {\n        //     switch (response.code) {\n        //         case \"2\":\n        //             this.staffPostResults = `No Record Found`;\n        //             //this.results = `Invalid User Name - sample 1:${JSON.stringify(response)}`;\n        //             break;\n        //         case \"88\":\n        //             this.staffPostResults = `Please login`;\n        //             //this.results = `Invalid password - sample 2: code: ${response.code}`;\n        //             break;\n        //         case \"99\":\n        //             this.staffPostResults = `Please try again later`;\n        //             //this.results = `Please fill in all field - sample 3: code: ${response.code}`;\n        //             break;\n        //     }\n        // }\n    },\n    methods: {\n        inputChange(input) {\n            this.postContent = input;\n        },\n        checkIfImage(file) {\n            return isImage(file);\n        },\n        showModal() {\n            this.isModalOpen = true;\n        },\n        hideModal() {\n            this.isModalOpen = false;\n        },\n        onFileChanged(event) {\n            this.selectedFile = event.target.files;\n            this.getImagePreviews();\n        },\n        async onUpload() {\n            // const formData = new FormData();\n            // console.log(this.selectedFile);\n            // formData.append('myFile', this.selectedFile, this.selectedFile.name);\n            // this.formData = formData;\n            // await DataSource.shared.uploadFile(this.selectedFile);\n        },\n        async onSubmit() {\n            this.error = \"\";\n            //this.results = \"<< Requesting.. >>\";\n            try {\n                const saveResponse = await DataSource.shared.savePost(this.selectedFile, this.postContent, this.tagAcademicYearID, this.profolio, this.tagUserID, this.tagClassID, this.tagLevelID);\n\n                if (saveResponse) {\n                    switch (saveResponse.code) {\n                        case \"1\":\n                            this.isModalOpen = false;\n                            console.log('success');\n                            // reset all input filed to blank\n                            this.selectedFile = null;\n                            this.$refs.fileupload.value = \"\";\n                            this.postContent = null;\n                            this.tagAcademicYearID = null;\n                            this.profolio = null;\n                            this.tagUserID = null;\n                            this.tagClassID = null;\n                            this.results = `Post Submitted`;\n                            this.success = 'Post Submitted, activity will be active in a while';\n                            break;\n                        case \"88\":\n                            this.results = `Please Login to submit post`;\n                            this.systemmsgError = true;\n                            break;\n                        case \"99\":\n                            this.results = `Please fill in content`;\n                            this.systemmsgError = true;\n                            break;\n                        // default:\n                        //     alert(\"Please try again later\");\n                        //     this.results = JSON.stringify(response);\n                    }\n                }\n            } catch (e) {\n                console.log(e);\n                this.error = e;\n            }\n\n        },\n        getImagePreviews() {\n            /*\n              Iterate over all of the files and generate an image preview for each one.\n            */\n            for (let i = 0; i < this.selectedFile.length; i++) {\n                /*\n                  Ensure the file is an image file\n                */\n                if (/\\.(jpe?g|png|gif)$/i.test(this.selectedFile[i].name)) {\n                    /*\n                      Create a new FileReader object\n                    */\n                    let reader = new FileReader();\n\n                    /*\n                      Add an event listener for when the file has been loaded\n                      to update the src on the file preview.\n                    */\n                    reader.addEventListener(\"load\", function () {\n                        this.$refs['image' + parseInt(i)][0].src = reader.result;\n                    }.bind(this), false);\n\n                    /*\n                      Read the data for the file in through the reader. When it has\n                      been loaded, we listen to the event propagated and set the image\n                      src to what was loaded from the reader.\n                    */\n                    reader.readAsDataURL(this.selectedFile[i]);\n                }\n            }\n        },\n        clearPreview() {\n            this.selectedFile = null;\n        }\n    },\n    validations: {\n        content: {\n            required,\n            minLength: minLength(4)\n        }\n    },\n};\n",{"version":3,"sources":["StaffPost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgNA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StaffPost.vue","sourceRoot":"src\\pages","sourcesContent":["<template>\r\n    <div id=\"staff-post\" class=\"container\">\r\n        <div class=\"row\">\r\n            <!--<b>result:</b> {{staffPostResults}}-->\r\n            <div class=\"col-md-8 mt-4\">\r\n                <div class=\"feed-header\">\r\n                    <h4 class=\"text-left\">Activity</h4>\r\n                    <div class=\"addPost\">\r\n                        <b-btn v-b-modal.modal1 @click=\"showModal\">ADD NOTE</b-btn>\r\n                    </div>\r\n                </div>\r\n                <div class=\"success\">{{success}}</div>\r\n                <div v-if=\"isLoading\">Loading...</div>\r\n\r\n                <div class=\"\" v-for=\"object in list\" :key=\"object.PostID\">\r\n                    <div class=\"feed-box\" v-bind:class=\"[object.PostID]\">\r\n                        <div class=\"author\">\r\n                            <div class=\"profile\"><img src=\"../assets/boy.png\"/></div>\r\n                            <div class=\"feed-heading\">\r\n                                <span>{{object.PostCreatedBy}}</span>\r\n                                <small class=\"date\"><i class=\"fa fa-clock-o\" aria-hidden=\"true\"></i>\r\n                                    {{object.PostCreatedDate}}\r\n                                </small>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"image-wrapper\" v-if=\"object.postFiles\">\r\n                            <ul>\r\n                                <li class=\"postFile__item\" v-for=\"postFile in object.postFiles\" :key=\"postFile.ID\">\r\n                                    <img :src=\"postFile.PostItemPath\"\r\n                                         :class=\"{'post-disabled':postFile.PostItemStatus !=='Active'}\"\r\n                                         v-if=\"checkIfImage(postFile.PostItemPath)\"/>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                        <div class=\"content\">\r\n                            <p>\r\n                                <!--<strong class=\"feed-subtitle\"> ADD A NOTE</strong>-->\r\n                                {{object.PostContent}}\r\n                            </p>\r\n                        </div>\r\n                        <div class=\"postFile\" v-if=\"object.postFiles\">\r\n                            <div class=\"postFile__item\" v-for=\"postFile in object.postFiles\" :key=\"postFile.ID\">\r\n                                <!--<img :src=\"postFile.PostItemPath\" :class=\"{'post-disabled':postFile.PostItemStatus !=='Active'}\"/>-->\r\n\r\n\r\n                                <a v-if=\"!checkIfImage(postFile.PostItemPath)\" v-bind:href=\"[postFile.PostItemPath]\"\r\n                                   :class=\"{'post-disabled':postFile.PostItemStatus !=='Active'}\">\r\n                                    <i class=\"fa fa-file\" aria-hidden=\"true\"></i>\r\n                                    {{postFile.PostItemPostID}}\r\n                                </a>\r\n                                <!--{{postFile.PostItemCreatedDate}}-->\r\n                            </div>\r\n                        </div>\r\n                        <!--<div slot=\"footer\">-->\r\n                        <!--<vs-row vs-justify=\"flex-end\">-->\r\n                        <!--<vs-button color=\"primary\" type=\"gradient\" >View</vs-button>-->\r\n                        <!--<vs-button color=\"danger\" type=\"gradient\">Delete</vs-button>-->\r\n                        <!--</vs-row>-->\r\n                        <!--</div>-->\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n            <vs-col vs-justify=\"center\" vs-w=\"4\" class=\"right-sideBar\">\r\n                <div class=\"dashboard-title mt-4 mb-3\"><h5 class=\"text-center\">Announcement</h5></div>\r\n                <div class=\"announcement__wrapper\">\r\n                    <div class=\"announcement__item\">\r\n                        <div class=\"subtitle\">\r\n                            <h6>Holidays</h6>\r\n                        </div>\r\n                        <div class=\"desc\">\r\n                            we offer academic, social and personal success for every student. Through opportunities to\r\n                            learn from the best, experiences beyond the ordinary, and the encouragement to achieve more\r\n                            than what they thought possible.\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"announcement__item\">\r\n                        <div class=\"subtitle\">\r\n                            <h6>Holidays</h6>\r\n                        </div>\r\n                        <div class=\"desc\">\r\n                            we offer academic, social and personal success for every student. Through opportunities to\r\n                            learn from the best, experiences beyond the ordinary, and the encouragement to achieve more\r\n                            than what they thought possible.\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"announcement__item\">\r\n                        <div class=\"subtitle\">\r\n                            <h6>Holidays</h6>\r\n                        </div>\r\n                        <div class=\"desc\">\r\n                            we offer academic, social and personal success for every student. Through opportunities to\r\n                            learn from the best, experiences beyond the ordinary, and the encouragement to achieve more\r\n                            than what they thought possible.\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </vs-col>\r\n        </div>\r\n\r\n        <b-modal id=\"modal1\" hide-footer title=\"ADD NOTE\" v-model=\"isModalOpen\">\r\n            <form class=\"needs-validation form-style\" novalidate @submit.prevent=\"onSubmit\">\r\n\r\n                <div class=\"mb-3 form-group\" :class=\"{ 'form-group--error': $v.content.$error }\">\r\n                    <!--<label for=\"username\">Username</label>-->\r\n                    <textarea type=\"text\" class=\"form-control\" id=\"postContent\" v-model=\"postContent\"\r\n                              placeholder=\"CONTENT\"\r\n                              required v-model.trim=\"$v.content.$model\"></textarea>\r\n                    <!--<RichTextEditor @inputChange=\"inputChange\"/>-->\r\n                    <!--<div>-->\r\n                    <!--<p>Output:</p>-->\r\n                    <!--{{postContent}}-->\r\n                    <!--</div>-->\r\n                </div>\r\n\r\n                <div class=\"error\" v-if=\"!$v.content.required\">Field is required</div>\r\n                <div class=\"error\" v-if=\"!$v.content.minLength\">Name must have at least\r\n                    {{$v.content.$params.minLength.min}} letters.\r\n                </div>\r\n\r\n                <div class=\"mb-2\">\r\n                    <input type=\"checkbox\" name=\"profolio\" id=\"profolio\" value=\"1\" true-value=\"Yes\" false-value=\"No\"\r\n                           v-model=\"profolio\">\r\n                    <label for=\"profolio\" class=\"toggle\"><strong>PROFOLIO</strong><span></span></label>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6 mb-2\">\r\n                        <!--<label for=\"password\">Password</label>-->\r\n                        <input type=\"text\" class=\"form-control\" id=\"tagAcademicYearID\" v-model=\"tagAcademicYearID\"\r\n                               placeholder=\"Tag Academic Year ID\"\r\n                               required>\r\n                        <div class=\"invalid-feedback\" style=\"width: 100%;\">\r\n                            Your Tag Academic Year ID is required.\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-md-6 mb-2\">\r\n                        <!--<label for=\"password\">Password</label>-->\r\n                        <input type=\"text\" class=\"form-control\" id=\"tagUserID\" v-model=\"tagUserID\"\r\n                               placeholder=\"Tag User ID\"\r\n                               required>\r\n                        <small>separate ID by comma</small>\r\n                        <div class=\"invalid-feedback\" style=\"width: 100%;\">\r\n                            Your Tag User ID is required.\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-6 mb-2\">\r\n                        <!--<label for=\"password\">Password</label>-->\r\n                        <input type=\"text\" class=\"form-control\" id=\"tagClassID\" v-model=\"tagClassID\"\r\n                               placeholder=\"Tag Class ID\"\r\n                               required>\r\n                        <div class=\"invalid-feedback\" style=\"width: 100%;\">\r\n                            Your Tag Class ID is required.\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"col-md-6 mb-2\">\r\n                        <!--<label for=\"password\">Password</label>-->\r\n                        <input type=\"text\" class=\"form-control\" id=\"tagLevelID\" v-model=\"tagLevelID\"\r\n                               placeholder=\"Tag Level ID\"\r\n                               required>\r\n                        <div class=\"invalid-feedback\" style=\"width: 100%;\">\r\n                            Your Tag Level ID is required.\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row inputFile-box\">\r\n                    <div class=\"col-md-12\">\r\n                        <input type=\"file\" multiple @change=\"onFileChanged\" ref=\"fileupload\" class=\"inputfile\"\r\n                               id=\"inputfile\"\r\n                               data-multiple-caption=\"{count} files selected\">\r\n                        <label for=\"inputfile\" @click=\"inputFile()\">Choose a file</label>\r\n                        <!--<button @click.prevent=\"onUpload\">Upload!</button>-->\r\n\r\n                        <div class=\"btn btn-primary\" v-if=\"selectedFile\" @click=\"clearPreview()\"><strong>X</strong> REMOVE ALL</div>\r\n                        <div class=\"uploadFile-image\">\r\n                            <div v-for=\"(file, key) in selectedFile\" class=\"col-md-3 file-listing\">\r\n                                <!--{{ file.name }}-->\r\n                                <img class=\"preview\" v-bind:ref=\"'image'+parseInt( key )\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"mb-2\">\r\n\r\n                </div>\r\n                <div class=\"system-msg\" v-bind:class=\"{'bg-danger': systemmsgError===true}\">{{results}}\r\n                    <p v-if=\"error\" style=\"color: red\">{{error}}</p></div>\r\n                <div class=\"row d-flex submit-wrap\">\r\n                    <div class=\"col-md-6\">\r\n                        <b-btn class=\"float-left\" @click=\"hideModal\">Cancel</b-btn>\r\n                    </div>\r\n                    <div class=\"col-md-6\">\r\n                        <button class=\"btn btn-primary login-btn\" type=\"submit\">Submit\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </b-modal>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import DataSource from \"../data/datasource\";\r\n    // import vue2Dropzone from 'vue2-dropzone';\r\n    // import 'vue2-dropzone/dist/vue2Dropzone.min.css';\r\n    // import '@websanova/vue-upload';\r\n    import {required, minLength} from 'vuelidate/lib/validators';\r\n    import isImage from \"is-image\";\r\n    import RichTextEditor from \"../components/RichTextEditor/RichTextEditor\";\r\n\r\n    export default {\r\n        name: 'staffPost',\r\n        components: {RichTextEditor},\r\n        data() {\r\n            return {\r\n                html: '',\r\n                files: [],\r\n                systemmsgError: false,\r\n                isModalOpen: false,\r\n                token: null,\r\n                userType: null,\r\n                list: [],\r\n                error: \"\",\r\n                staffPostResults: \"\",\r\n                results: \"\",\r\n                postContent: \"\",\r\n                tagAcademicYearID: \"\",\r\n                profolio: \"No\",\r\n                tagUserID: \"\",\r\n                tagClassID: \"\",\r\n                tagLevelID: \"\",\r\n                // files: [],\r\n                content: '',\r\n                selectedFile: null,\r\n                success: null,\r\n                dropzoneOptions: {\r\n                    url: 'http://local.emsv2/controller/Upload_File.asmx/uploadFile',\r\n                },\r\n                isLoading: true,\r\n                saveResponse: \"\",\r\n                PostItemPath: \"\",\r\n            };\r\n        },\r\n        // components: {Step},\r\n        async mounted() {\r\n            // this.showSession()\r\n            // user menu\r\n            try {\r\n                let response = await DataSource.shared.getStaffPost();\r\n                for (let item of response.Table) {\r\n                    const fileRes = await DataSource.shared.getPostFile(item.PostID);\r\n                    if (fileRes.Table) {\r\n                        item.postFiles = fileRes.Table;\r\n                    }\r\n\r\n                    // get name\r\n                    // const author = await DataSource.shared.getPostFile(item.PostCreatedBy);\r\n                    // console.log(author);\r\n                    // item.authorName = ;\r\n                }\r\n                this.list = response.Table;\r\n                let saveResponse = await DataSource.shared.getPostDropdown();\r\n                console.log(saveResponse);\r\n            } catch (e) {\r\n                console.log(e, '  errrr');\r\n            }\r\n            this.isLoading = false;\r\n            // if (response) {\r\n            //     switch (response.code) {\r\n            //         case \"2\":\r\n            //             this.staffPostResults = `No Record Found`;\r\n            //             //this.results = `Invalid User Name - sample 1:${JSON.stringify(response)}`;\r\n            //             break;\r\n            //         case \"88\":\r\n            //             this.staffPostResults = `Please login`;\r\n            //             //this.results = `Invalid password - sample 2: code: ${response.code}`;\r\n            //             break;\r\n            //         case \"99\":\r\n            //             this.staffPostResults = `Please try again later`;\r\n            //             //this.results = `Please fill in all field - sample 3: code: ${response.code}`;\r\n            //             break;\r\n            //     }\r\n            // }\r\n        },\r\n        methods: {\r\n            inputChange(input) {\r\n                this.postContent = input;\r\n            },\r\n            checkIfImage(file) {\r\n                return isImage(file);\r\n            },\r\n            showModal() {\r\n                this.isModalOpen = true;\r\n            },\r\n            hideModal() {\r\n                this.isModalOpen = false;\r\n            },\r\n            onFileChanged(event) {\r\n                this.selectedFile = event.target.files;\r\n                this.getImagePreviews();\r\n            },\r\n            async onUpload() {\r\n                // const formData = new FormData();\r\n                // console.log(this.selectedFile);\r\n                // formData.append('myFile', this.selectedFile, this.selectedFile.name);\r\n                // this.formData = formData;\r\n                // await DataSource.shared.uploadFile(this.selectedFile);\r\n            },\r\n            async onSubmit() {\r\n                this.error = \"\";\r\n                //this.results = \"<< Requesting.. >>\";\r\n                try {\r\n                    const saveResponse = await DataSource.shared.savePost(this.selectedFile, this.postContent, this.tagAcademicYearID, this.profolio, this.tagUserID, this.tagClassID, this.tagLevelID);\r\n\r\n                    if (saveResponse) {\r\n                        switch (saveResponse.code) {\r\n                            case \"1\":\r\n                                this.isModalOpen = false;\r\n                                console.log('success');\r\n                                // reset all input filed to blank\r\n                                this.selectedFile = null;\r\n                                this.$refs.fileupload.value = \"\";\r\n                                this.postContent = null;\r\n                                this.tagAcademicYearID = null;\r\n                                this.profolio = null;\r\n                                this.tagUserID = null;\r\n                                this.tagClassID = null;\r\n                                this.results = `Post Submitted`;\r\n                                this.success = 'Post Submitted, activity will be active in a while';\r\n                                break;\r\n                            case \"88\":\r\n                                this.results = `Please Login to submit post`;\r\n                                this.systemmsgError = true;\r\n                                break;\r\n                            case \"99\":\r\n                                this.results = `Please fill in content`;\r\n                                this.systemmsgError = true;\r\n                                break;\r\n                            // default:\r\n                            //     alert(\"Please try again later\");\r\n                            //     this.results = JSON.stringify(response);\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    console.log(e);\r\n                    this.error = e;\r\n                }\r\n\r\n            },\r\n            getImagePreviews() {\r\n                /*\r\n                  Iterate over all of the files and generate an image preview for each one.\r\n                */\r\n                for (let i = 0; i < this.selectedFile.length; i++) {\r\n                    /*\r\n                      Ensure the file is an image file\r\n                    */\r\n                    if (/\\.(jpe?g|png|gif)$/i.test(this.selectedFile[i].name)) {\r\n                        /*\r\n                          Create a new FileReader object\r\n                        */\r\n                        let reader = new FileReader();\r\n\r\n                        /*\r\n                          Add an event listener for when the file has been loaded\r\n                          to update the src on the file preview.\r\n                        */\r\n                        reader.addEventListener(\"load\", function () {\r\n                            this.$refs['image' + parseInt(i)][0].src = reader.result;\r\n                        }.bind(this), false);\r\n\r\n                        /*\r\n                          Read the data for the file in through the reader. When it has\r\n                          been loaded, we listen to the event propagated and set the image\r\n                          src to what was loaded from the reader.\r\n                        */\r\n                        reader.readAsDataURL(this.selectedFile[i]);\r\n                    }\r\n                }\r\n            },\r\n            clearPreview() {\r\n                this.selectedFile = null;\r\n            }\r\n        },\r\n        validations: {\r\n            content: {\r\n                required,\r\n                minLength: minLength(4)\r\n            }\r\n        },\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n\r\n    .author {\r\n        text-align: left;\r\n        font-weight: bold;\r\n        display: -webkit-box;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n        align-items: center;\r\n        padding: 20px;\r\n    }\r\n\r\n    .feed-heading {\r\n        display: inline-block;\r\n        text-align: left;\r\n    }\r\n\r\n    .feed-box .content {\r\n        padding: 10px 0px;\r\n        text-align: left;\r\n        margin: 10px 0px 0px;\r\n        border-top: 1px solid #edf0f4;\r\n        border-left: 3px solid #f44353;\r\n    }\r\n\r\n    .feed-box {\r\n        margin: 20px 0px;\r\n        position: relative;\r\n        background: white;\r\n        border-radius: 3px;\r\n        box-shadow: 0px 0px 10px -7px;\r\n    }\r\n\r\n    .postFile {\r\n        display: block;\r\n        width: 100%;\r\n    }\r\n\r\n    .postFile__item a {\r\n        display: inline-block;\r\n        padding: 5px 20px 5px 46px;\r\n        /* background: #f5f9fc; */\r\n        border-radius: 20px;\r\n        margin: 10px;\r\n        float: left;\r\n        border: 1px solid #b7d3e8;\r\n        position: relative;\r\n        color: #8ca0af;\r\n        overflow: hidden;\r\n        font-weight: normal;\r\n    }\r\n\r\n    .postFile__item a i {\r\n        color: #b7d3e8;\r\n        background: #f5f9fc;\r\n        position: absolute;\r\n        left: 0px;\r\n        height: 100%;\r\n        width: 32px;\r\n        top: 0px;\r\n        text-align: center;\r\n        border-right: 1px solid #b7d3e8;\r\n        line-height: 28px;\r\n    }\r\n\r\n    .postFile__item {\r\n        border-top: 1px solid #eee;\r\n        margin-bottom: -10px;\r\n        display: table;\r\n        width: 100%;\r\n    }\r\n\r\n    li.postFile__item img {\r\n        max-width: 100%;\r\n        display: initial;\r\n        object-fit: cover;\r\n    }\r\n\r\n    .image-wrapper li.postFile__item {\r\n        display: flex;\r\n        width: 21%;\r\n        height: 100px;\r\n        overflow: hidden;\r\n        margin: 0px 2%;\r\n    }\r\n\r\n    .image-wrapper li.postFile__item:first-child {\r\n        width: 96%;\r\n        height: 200px;\r\n    }\r\n\r\n    .image-wrapper li.postFile__item:empty {\r\n        display: none;\r\n    }\r\n\r\n    .image-wrapper ul {\r\n        padding: 0px;\r\n        margin: 0px;\r\n    }\r\n\r\n    .profile {\r\n        width: 52px;\r\n        position: relative;\r\n        display: inline-block;\r\n        margin-right: 20px;\r\n    }\r\n\r\n    .profile img {\r\n        max-width: 100%;\r\n        background: #e6ecf7;\r\n        border-radius: 100%;\r\n    }\r\n\r\n    .content-icon {\r\n        background: #f4415421;\r\n        flex: 1;\r\n        width: 24px;\r\n        height: 24px;\r\n        border-radius: 23px;\r\n        text-align: center;\r\n        color: #e9454c;\r\n        font-size: 12px;\r\n        line-height: 23px;\r\n        /* display: inline-block; */\r\n    }\r\n\r\n    .content p {\r\n        margin: 0px 10px;\r\n        flex: 20;\r\n    }\r\n\r\n    small.date {\r\n        display: block;\r\n        color: #9a9a9a;\r\n    }\r\n\r\n    div#modal1 {\r\n        z-index: 99999;\r\n    }\r\n\r\n    .toggle {\r\n        position: relative;\r\n        display: block;\r\n        width: 40px;\r\n        height: 20px;\r\n        cursor: pointer;\r\n        -webkit-tap-highlight-color: transparent;\r\n        transform: translate3d(0, 0, 0);\r\n    }\r\n\r\n    .toggle:before {\r\n        content: \"\";\r\n        position: relative;\r\n        top: 3px;\r\n        left: 3px;\r\n        width: 34px;\r\n        height: 14px;\r\n        display: block;\r\n        background: #9A9999;\r\n        border-radius: 8px;\r\n        transition: background 0.2s ease;\r\n    }\r\n\r\n    .toggle span {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 20px;\r\n        height: 20px;\r\n        display: block;\r\n        background: white;\r\n        border-radius: 10px;\r\n        box-shadow: 0 3px 8px rgba(154, 153, 153, 0.5);\r\n        transition: all 0.2s ease;\r\n    }\r\n\r\n    .toggle span:before {\r\n        content: \"\";\r\n        position: absolute;\r\n        display: block;\r\n        margin: -18px;\r\n        width: 56px;\r\n        height: 56px;\r\n        background: rgba(79, 46, 220, 0.5);\r\n        border-radius: 50%;\r\n        transform: scale(0);\r\n        opacity: 1;\r\n        pointer-events: none;\r\n    }\r\n\r\n    #profolio:checked + .toggle:before {\r\n        background: #b9b9b9;\r\n    }\r\n\r\n    #profolio:checked + .toggle span {\r\n        background: #f44252;\r\n        transform: translateX(20px);\r\n        transition: all 0.2s cubic-bezier(0.8, 0.4, 0.3, 1.25), background 0.15s ease;\r\n        box-shadow: 0 3px 8px rgba(79, 46, 220, 0.2);\r\n    }\r\n\r\n    #profolio:checked + .toggle span:before {\r\n        transform: scale(1);\r\n        opacity: 0;\r\n        transition: all 0.4s ease;\r\n    }\r\n\r\n    input#profolio {\r\n        display: none;\r\n    }\r\n\r\n    label.toggle strong {\r\n        padding-left: 49px;\r\n        top: -12px;\r\n        position: relative;\r\n    }\r\n\r\n    label.toggle {\r\n        margin: 20px 10px;\r\n    }\r\n\r\n    .feed-header h4 {\r\n        margin-right: 20px;\r\n        display: inline-block;\r\n        float: left;\r\n        line-height: 37px;\r\n        margin-bottom: 0px;\r\n        font-size: 18px;\r\n        letter-spacing: 1px;\r\n        text-transform: uppercase;\r\n        padding-left: 10px;\r\n        color: #5a6a79;\r\n    }\r\n\r\n    .feed-header {\r\n        background: #f5f9fc;\r\n        padding: 10px;\r\n        border: 1px solid #d4e4f1;\r\n        display: table;\r\n        width: 100%;\r\n    }\r\n\r\n    .addPost {\r\n        display: inline-block;\r\n        float: right;\r\n    }\r\n\r\n    .addPost button {\r\n        background: #3e445c;\r\n        border: 0px;\r\n        color: #ffffff;\r\n        border-radius: 2px;\r\n        position: relative;\r\n        font-size: 13px;\r\n        width: 100%;\r\n        padding: 10px;\r\n        text-align: left;\r\n        /* margin-top: 20px; */\r\n    }\r\n\r\n    strong.feed-subtitle {\r\n        border-bottom: 1px solid #413f5617;\r\n        padding-bottom: 10px;\r\n        margin-bottom: 10px;\r\n        display: block;\r\n    }\r\n\r\n    .success {\r\n        text-align: left;\r\n        padding: 10px;\r\n        background: linear-gradient(to right, #e644513b, #e6ecf7);\r\n        margin-top: 10px;\r\n        color: #3e445c;\r\n    }\r\n\r\n    .success:empty {\r\n        display: none;\r\n        padding: 0px;\r\n    }\r\n\r\n    .right-sideBar {\r\n        padding: 0px 20px;\r\n    }\r\n\r\n    .announcement__item {\r\n        background: #f5f9fc;\r\n        padding: 20px;\r\n        margin-bottom: 20px;\r\n        text-align: left;\r\n        border: 1px solid #d4e4f1;\r\n    }\r\n\r\n    .announcement__item img {\r\n        max-width: 80%;\r\n        margin: 20px 0px;\r\n        border-radius: 4px;\r\n    }\r\n\r\n    .announcement__item .subtitle h6 {\r\n        font-weight: bold;\r\n    }\r\n\r\n\r\n</style>\r\n\r\n<style>\r\n    .inputfile {\r\n        width: 0.1px;\r\n        height: 0.1px;\r\n        opacity: 0;\r\n        overflow: hidden;\r\n        position: absolute;\r\n        z-index: -1;\r\n    }\r\n\r\n    .inputfile + label {\r\n        font-size: 1.25em;\r\n        color: white;\r\n        background-color: #606266;\r\n        display: table !important;\r\n        padding: 5px 20px;\r\n        border-radius: 5px;\r\n        margin: 10px auto 20px;\r\n    }\r\n\r\n    .inputfile:focus + label,\r\n    .inputfile + label:hover {\r\n        background-color: #f44252;\r\n    }\r\n\r\n    .inputfile + label {\r\n        cursor: pointer; /* \"hand\" cursor */\r\n    }\r\n\r\n    .file-listing img {\r\n        max-width: 100%;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .uploadFile-image .file-listing {\r\n        float: left;\r\n        padding: 10px;\r\n        background: #eee;\r\n        margin: 5px;\r\n    }\r\n\r\n    .uploadFile-image {\r\n        display: table;\r\n        width: 100%;\r\n        margin: 20px 0px;\r\n    }\r\n\r\n    .file-listing img:hover {\r\n        opacity: 0.5;\r\n    }\r\n\r\n    .inputFile-box .btn {\r\n        background: transparent;\r\n        border: 0px;\r\n        color: #222;\r\n        float: right;\r\n        padding: 5px 20px;\r\n        margin-bottom: 10px;\r\n        font-size: 11px;\r\n    }\r\n\r\n    .inputFile-box .btn:hover {\r\n        background: #eee;\r\n    }\r\n\r\n</style>"]}]}